"use strict";$(function(){$(document).on("click.qor.alert",'[data-dismiss="alert"]',function(){$(this).closest(".qor-alert").removeClass("qor-alert__active")}),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').removeClass("qor-alert__active")},5e3)}),$(function(){$(document).on("click",".qor-dialog--global-search",function(e){e.stopPropagation(),$(e.target).parents(".qor-dialog-content").length||$(e.target).is(".qor-dialog-content")||$(".qor-dialog--global-search").remove()}),$(document).on("click",".qor-global-search--show",function(e){e.preventDefault();var a=$(this).data(),t=window.Mustache.render('<div class="qor-dialog qor-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="qor-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',a);$("body").append(t),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),$(function(){var e=[],a=localStorage.getItem("qoradmin_menu_status");a&&a.length&&(e=a.split(",")),$(".qor-menu-container").on("click","> ul > li > a",function(){var a=$(this),t=a.parent(),o=a.next("ul"),l=t.attr("qor-icon-name");o.length&&(o.hasClass("in")?(e.push(l),t.removeClass("is-expanded"),o.one("transitionend",function(){o.removeClass("collapsing in")}).addClass("collapsing").height(0)):(e=_.without(e,l),t.addClass("is-expanded"),o.one("transitionend",function(){o.removeClass("collapsing")}).addClass("collapsing in").height(o.prop("scrollHeight"))),localStorage.setItem("qoradmin_menu_status",e))}).find("> ul > li > a").each(function(){var a=$(this),t=a.parent(),o=a.next("ul"),l=t.attr("qor-icon-name");o.length&&(o.addClass("collapse"),t.addClass("has-menu"),-1!=e.indexOf(l)?o.height(0):(t.addClass("is-expanded"),o.addClass("in").height(o.prop("scrollHeight"))))});var t=$(".qor-page > .qor-page__header"),o=$(".qor-page > .qor-page__body"),l=t.find(".qor-page-subnav__header").length?96:48;t.length&&(t.height()>l&&o.css("padding-top",t.height()),$(".qor-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".qor-mobile--show-actions").on("click",function(){$(".qor-page__header").toggleClass("actions-show")})}),$(function(){function e(e){$("[data-url]").removeClass(n),e&&e.length&&e.addClass(n)}function a(){var e=$(".qor-js-table tbody").find(".mdl-checkbox__input:checked"),a=[];return!!e.length&&(e.each(function(){a.push($(this).closest("tr").data("primary-key"))}),a)}var t=$("body"),o=void 0,l=void 0,n="is-selected",s=function(){return t.hasClass("qor-slideout-open")},r=function(){return t.hasClass("qor-bottomsheets-open")};t.qorBottomSheets(),t.qorSlideout(),o=t.data("qor.slideout"),l=t.data("qor.bottomsheets"),$(document).on("click.qor.openUrl","[data-url]",function(t){var i=$(this),d=$(t.target),c=i.hasClass("qor-button--new"),h=i.hasClass("qor-button--edit"),u=(i.is(".qor-table tr[data-url]")||i.closest(".qor-js-table").length)&&!i.closest(".qor-slideout").length,g=i.data(),p=void 0,m=g.openType,q=i.parents(".qor-theme-slideout").length,f=i.closest(".qor-slideout").length,b=i.hasClass("qor-action-button")||i.hasClass("qor-action--button");if(t.stopPropagation(),!(i.data("ajax-form")||d.closest(".qor-table--bulking").length||d.closest(".qor-button--actions").length||!d.data("url")&&d.is("a")||u&&r()))return b&&(p=a())&&(g=$.extend({},g,{actionData:p})),g.$target=d,g.method&&"GET"!=g.method.toUpperCase()?void 0:"bottomsheet"!=m&&!b||"slideout"==m?"slideout"==m||u||c&&!r()||h?"slideout"==m||q?i.hasClass(n)?(o.hide(),e(),!1):(o.open(g),e(i),!1):(window.location=g.url,!1):s()||c&&r()?(l.open(g),!1):q?(o.open(g),!1):(l.open(g),!1):b&&!p&&i.closest('[data-toggle="qor.action.bulk"]').length&&!f?(window.QOR.qorConfirm(g.errorNoItem),!1):(l.open(g),!1)})}),$(function(){var e=window.location;$(".qor-search").each(function(){var a=$(this),t=a.find(".qor-search__input"),o=a.find(".qor-search__clear"),l=!!t.val(),n=function(){"?"==e.search.replace(new RegExp(t.attr("name")+"\\=?\\w*"),"")?e.href=e.href.split("?")[0]:e.search=e.search.replace(new RegExp(t.attr("name")+"\\=?\\w*"),"")};a.closest(".qor-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),o.on("click",function(){t.val()||l?n():a.removeClass("is-dirty")})})});